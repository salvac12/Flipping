const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient();

async function main() {
  console.log('ðŸ  Seeding sold properties data...');

  // Propiedades vendidas de ejemplo en las zonas prioritarias
  // Estos datos son ficticios pero realistas basados en el mercado de Madrid 2024-2025
  const soldProperties = [
    // GUINDALERA
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado en Guindalera, 3 hab',
      address: 'Calle Francisco Silvela, 82',
      zone: 'GUINDALERA',
      city: 'Madrid',
      latitude: 40.4340,
      longitude: -3.6630,
      salePrice: 495000,
      salePricePerM2: 4500,
      listingPrice: 520000,
      surface: 110,
      rooms: 3,
      bathrooms: 2,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1975,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'media',
      listingDate: new Date('2024-08-15'),
      saleDate: new Date('2024-10-20'),
      daysOnMarket: 66,
      dataSource: 'manual',
      reliability: 8,
      notes: 'Vendida tras dos meses. Reforma de calidad media.',
    },
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado integral Guindalera',
      address: 'Calle LÃ³pez de Hoyos, 145',
      zone: 'GUINDALERA',
      city: 'Madrid',
      latitude: 40.4350,
      longitude: -3.6640,
      salePrice: 580000,
      salePricePerM2: 4640,
      listingPrice: 600000,
      surface: 125,
      rooms: 3,
      bathrooms: 2,
      floor: 3,
      isExterior: true,
      hasLift: true,
      buildYear: 1978,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-09-01'),
      saleDate: new Date('2024-10-15'),
      daysOnMarket: 44,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Reforma integral de alta calidad. Venta rÃ¡pida.',
    },
    {
      portal: 'FOTOCASA',
      title: 'Amplio piso reformado, 4 hab',
      address: 'Avenida de AmÃ©rica, 12',
      zone: 'GUINDALERA',
      city: 'Madrid',
      latitude: 40.4320,
      longitude: -3.6650,
      salePrice: 650000,
      salePricePerM2: 4333,
      listingPrice: 675000,
      surface: 150,
      rooms: 4,
      bathrooms: 2,
      floor: 5,
      isExterior: true,
      hasLift: true,
      buildYear: 1972,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'media',
      listingDate: new Date('2024-07-20'),
      saleDate: new Date('2024-09-30'),
      daysOnMarket: 72,
      dataSource: 'manual',
      reliability: 8,
      notes: 'Gran superficie. Precio ajustado por superficie.',
    },

    // DELICIAS
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado en Delicias',
      address: 'Calle Palos de la Frontera, 45',
      zone: 'DELICIAS',
      city: 'Madrid',
      latitude: 40.3995,
      longitude: -3.6945,
      salePrice: 420000,
      salePricePerM2: 3500,
      listingPrice: 445000,
      surface: 120,
      rooms: 3,
      bathrooms: 2,
      floor: 3,
      isExterior: true,
      hasLift: true,
      buildYear: 1970,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'basica',
      listingDate: new Date('2024-08-01'),
      saleDate: new Date('2024-10-10'),
      daysOnMarket: 70,
      dataSource: 'manual',
      reliability: 7,
      notes: 'Reforma bÃ¡sica funcional.',
    },
    {
      portal: 'IDEALISTA',
      title: 'Piso completamente reformado Delicias',
      address: 'Calle Embajadores, 210',
      zone: 'DELICIAS',
      city: 'Madrid',
      latitude: 40.4000,
      longitude: -3.6950,
      salePrice: 525000,
      salePricePerM2: 3937,
      listingPrice: 550000,
      surface: 133,
      rooms: 3,
      bathrooms: 2,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1974,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-09-10'),
      saleDate: new Date('2024-10-25'),
      daysOnMarket: 45,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Reforma de calidad. Zona en revalorizaciÃ³n.',
    },

    // PACIFICO
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado junto al Retiro',
      address: 'Calle Doctor Esquerdo, 55',
      zone: 'PACIFICO',
      city: 'Madrid',
      latitude: 40.4100,
      longitude: -3.6710,
      salePrice: 560000,
      salePricePerM2: 4480,
      listingPrice: 580000,
      surface: 125,
      rooms: 3,
      bathrooms: 2,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1976,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-08-20'),
      saleDate: new Date('2024-10-05'),
      daysOnMarket: 46,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Excelente ubicaciÃ³n cerca del Retiro.',
    },
    {
      portal: 'FOTOCASA',
      title: 'Piso exterior reformado, PacÃ­fico',
      address: 'Calle O\'Donnell, 35',
      zone: 'PACIFICO',
      city: 'Madrid',
      latitude: 40.4080,
      longitude: -3.6730,
      salePrice: 475000,
      salePricePerM2: 4318,
      listingPrice: 495000,
      surface: 110,
      rooms: 2,
      bathrooms: 2,
      floor: 3,
      isExterior: true,
      hasLift: true,
      buildYear: 1975,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'media',
      listingDate: new Date('2024-09-05'),
      saleDate: new Date('2024-10-18'),
      daysOnMarket: 43,
      dataSource: 'manual',
      reliability: 8,
      notes: 'Reforma de calidad media. Venta relativamente rÃ¡pida.',
    },

    // PROSPERIDAD
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado en Prosperidad',
      address: 'Calle LÃ³pez de Hoyos, 280',
      zone: 'PROSPERIDAD',
      city: 'Madrid',
      latitude: 40.4430,
      longitude: -3.6780,
      salePrice: 595000,
      salePricePerM2: 4625,
      listingPrice: 620000,
      surface: 128,
      rooms: 3,
      bathrooms: 2,
      floor: 5,
      isExterior: true,
      hasLift: true,
      buildYear: 1973,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-09-01'),
      saleDate: new Date('2024-10-12'),
      daysOnMarket: 41,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Zona muy demandada. Venta rÃ¡pida.',
    },
    {
      portal: 'IDEALISTA',
      title: 'Piso luminoso reformado, 4 hab',
      address: 'Calle MarÃ­a de Molina, 50',
      zone: 'PROSPERIDAD',
      city: 'Madrid',
      latitude: 40.4440,
      longitude: -3.6760,
      salePrice: 720000,
      salePricePerM2: 4800,
      listingPrice: 750000,
      surface: 150,
      rooms: 4,
      bathrooms: 2,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1978,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-08-10'),
      saleDate: new Date('2024-09-25'),
      daysOnMarket: 46,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Gran piso, reforma de alta calidad.',
    },

    // RETIRO
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado zona Retiro',
      address: 'Calle Conde de PeÃ±alver, 20',
      zone: 'RETIRO',
      city: 'Madrid',
      latitude: 40.4140,
      longitude: -3.6845,
      salePrice: 675000,
      salePricePerM2: 5400,
      listingPrice: 700000,
      surface: 125,
      rooms: 3,
      bathrooms: 2,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1975,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-08-25'),
      saleDate: new Date('2024-10-08'),
      daysOnMarket: 44,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Zona premium. Alta demanda.',
    },
    {
      portal: 'FOTOCASA',
      title: 'Piso completamente reformado, Retiro',
      address: 'Calle AlcalÃ¡, 180',
      zone: 'RETIRO',
      city: 'Madrid',
      latitude: 40.4125,
      longitude: -3.6850,
      salePrice: 585000,
      salePricePerM2: 5318,
      listingPrice: 610000,
      surface: 110,
      rooms: 2,
      bathrooms: 2,
      floor: 3,
      isExterior: true,
      hasLift: true,
      buildYear: 1972,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'media',
      listingDate: new Date('2024-09-15'),
      saleDate: new Date('2024-10-22'),
      daysOnMarket: 37,
      dataSource: 'manual',
      reliability: 8,
      notes: 'Venta rÃ¡pida en zona premium.',
    },

    // ARGUELLES
    {
      portal: 'IDEALISTA',
      title: 'Piso reformado en ArgÃ¼elles',
      address: 'Calle Gaztambide, 15',
      zone: 'ARGUELLES',
      city: 'Madrid',
      latitude: 40.4295,
      longitude: -3.7195,
      salePrice: 625000,
      salePricePerM2: 5000,
      listingPrice: 650000,
      surface: 125,
      rooms: 3,
      bathrooms: 2,
      floor: 5,
      isExterior: true,
      hasLift: true,
      buildYear: 1974,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-08-30'),
      saleDate: new Date('2024-10-15'),
      daysOnMarket: 46,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Zona muy demandada de ArgÃ¼elles.',
    },
    {
      portal: 'IDEALISTA',
      title: 'Amplio piso reformado, Vallehermoso',
      address: 'Calle Vallehermoso, 80',
      zone: 'ARGUELLES',
      city: 'Madrid',
      latitude: 40.4310,
      longitude: -3.7170,
      salePrice: 780000,
      salePricePerM2: 5200,
      listingPrice: 810000,
      surface: 150,
      rooms: 4,
      bathrooms: 3,
      floor: 4,
      isExterior: true,
      hasLift: true,
      buildYear: 1976,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'alta',
      listingDate: new Date('2024-09-01'),
      saleDate: new Date('2024-10-20'),
      daysOnMarket: 49,
      dataSource: 'manual',
      reliability: 9,
      notes: 'Piso de lujo en zona premium.',
    },
    {
      portal: 'FOTOCASA',
      title: 'Piso exterior reformado, Islas Filipinas',
      address: 'Calle GuzmÃ¡n el Bueno, 95',
      zone: 'ARGUELLES',
      city: 'Madrid',
      latitude: 40.4320,
      longitude: -3.7200,
      salePrice: 540000,
      salePricePerM2: 4909,
      listingPrice: 565000,
      surface: 110,
      rooms: 3,
      bathrooms: 2,
      floor: 3,
      isExterior: true,
      hasLift: true,
      buildYear: 1975,
      condition: 'reformado',
      wasReformed: true,
      reformQuality: 'media',
      listingDate: new Date('2024-09-10'),
      saleDate: new Date('2024-10-25'),
      daysOnMarket: 45,
      dataSource: 'manual',
      reliability: 8,
      notes: 'Reforma de calidad media. Buena zona.',
    },
  ];

  console.log(`ðŸ“ Creating ${soldProperties.length} sold properties...`);

  for (const property of soldProperties) {
    try {
      await prisma.soldProperty.create({
        data: property,
      });
    } catch (error) {
      console.log(`âš ï¸  Error creating property: ${property.title}`, error.message);
    }
  }

  console.log(`âœ… Created ${soldProperties.length} sold property entries`);
  console.log('âœ¨ Seeding completed successfully!');
}

main()
  .catch((e) => {
    console.error('âŒ Error seeding database:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
